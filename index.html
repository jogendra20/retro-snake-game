<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Cyberpunk Snake</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        body {
            background-color: #050505;
            color: #0ff;
            font-family: 'Orbitron', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            /* subtle scanline effect */
            background-image: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
        }

        h1 {
            text-transform: uppercase;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            letter-spacing: 5px;
        }

        #game-container {
            position: relative;
            box-shadow: 0 0 20px #00ff0044, 0 0 50px #00ff0022;
            border: 2px solid #333;
        }

        canvas {
            background-color: #0a0a0a;
            display: block;
            border: 1px solid #1a1a1a;
        }

        /* UI Overlay for Score and Game Over */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #score-board {
            padding: 10px;
            font-size: 1.2rem;
            text-align: left;
            text-shadow: 0 0 5px #0ff;
        }

        #game-over-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.85);
            padding: 40px;
            border: 1px solid #0ff;
            box-shadow: 0 0 30px #0ff4;
            display: none; /* Hidden by default */
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }

        #game-over-screen h2 {
            color: #ff0055;
            font-size: 3rem;
            margin: 0 0 20px 0;
            text-shadow: 0 0 15px #ff0055;
        }

        #final-score {
            color: #fff;
            margin-bottom: 30px;
            display: block;
        }

        button {
            background: transparent;
            color: #0ff;
            border: 2px solid #0ff;
            padding: 15px 30px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s;
            box-shadow: 0 0 10px #0ff4;
        }

        button:hover {
            background: #0ff;
            color: #000;
            box-shadow: 0 0 20px #0ff;
        }

        /* Mobile Controls */
        #mobile-controls {
            display: none;
            margin-top: 20px;
            gap: 10px;
            grid-template-columns: repeat(3, 1fr);
            width: 200px;
        }

        .d-pad-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #0ff;
            color: #0ff;
            padding: 15px;
            border-radius: 5px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }
        
        .d-pad-btn:active {
            background: #0ff;
            color: #000;
        }

        @media (max-width: 600px) {
            canvas {
                width: 100%;
                max-width: 350px;
                height: auto;
            }
            #mobile-controls {
                display: grid;
            }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <h1>NEON SNAKE</h1>

    <div id="game-container">
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        
        <div id="ui-layer">
            <div id="score-board">SCORE: <span id="score">0</span></div>
        </div>

        <div id="game-over-screen">
            <h2>SYSTEM FAILURE</h2>
            <span id="final-score">Score: 0</span>
            <button onclick="resetGame()">REBOOT SYSTEM</button>
        </div>
    </div>

    <div id="mobile-controls">
        <div></div>
        <button class="d-pad-btn" onclick="handleMobileInput('UP')">▲</button>
        <div></div>
        <button class="d-pad-btn" onclick="handleMobileInput('LEFT')">◀</button>
        <button class="d-pad-btn" onclick="handleMobileInput('DOWN')">▼</button>
        <button class="d-pad-btn" onclick="handleMobileInput('RIGHT')">▶</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreElement = document.getElementById('final-score');

        // Game Settings
        const gridSize = 20;
        const tileCount = canvas.width / gridSize;
        const gameSpeed = 100; // Lower is faster

        // Game State
        let score = 0;
        let dx = 0;
        let dy = 0;
        let snake = [];
        let food = { x: 0, y: 0 };
        let gameLoop;
        let isGameRunning = false;
        
        // Colors
        const snakeColor = '#00ff00';
        const snakeHeadColor = '#ccffcc';
        const foodColor = '#ff0055';
        const gridColor = '#1a1a1a';

        function initGame() {
            snake = [
                { x: 10, y: 10 },
                { x: 10, y: 11 },
                { x: 10, y: 12 }
            ];
            score = 0;
            dx = 0;
            dy = -1; // Start moving up
            scoreElement.innerText = score;
            placeFood();
            isGameRunning = true;
            gameOverScreen.style.display = 'none';
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, gameSpeed);
        }

        function resetGame() {
            initGame();
        }

        function update() {
            if (!isGameRunning) return;

            // Move Snake
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // Wall Collision (Wrap around or Die? Let's do Die for classic feel)
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                gameOver();
                return;
            }

            // Self Collision
            for (let i = 0; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    gameOver();
                    return;
                }
            }

            snake.unshift(head);

            // Eat Food
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreElement.innerText = score;
                placeFood();
                // Don't pop, so snake grows
            } else {
                snake.pop();
            }

            draw();
        }

        function draw() {
            // Clear screen
            ctx.fillStyle = '#050505';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Grid (Cyberpunk style)
            ctx.strokeStyle = gridColor;
            ctx.lineWidth = 0.5;
            for(let i=0; i<tileCount; i++) {
                ctx.beginPath();
                ctx.moveTo(i*gridSize, 0);
                ctx.lineTo(i*gridSize, canvas.height);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i*gridSize);
                ctx.lineTo(canvas.width, i*gridSize);
                ctx.stroke();
            }

            // Draw Food
            ctx.fillStyle = foodColor;
            ctx.shadowBlur = 15;
            ctx.shadowColor = foodColor;
            ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);
            ctx.shadowBlur = 0; // Reset shadow for grid

            // Draw Snake
            for (let i = 0; i < snake.length; i++) {
                ctx.fillStyle = (i === 0) ? snakeHeadColor : snakeColor;
                
                // Add glow to snake
                ctx.shadowBlur = 10;
                ctx.shadowColor = snakeColor;
                
                ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize - 2, gridSize - 2);
            }
            ctx.shadowBlur = 0;
        }

        function placeFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            
            // Don't place food on snake body
            for(let part of snake) {
                if(part.x === food.x && part.y === food.y) {
                    placeFood();
                    break;
                }
            }
        }

        function gameOver() {
            isGameRunning = false;
            clearInterval(gameLoop);
            finalScoreElement.innerText = "FINAL SCORE: " + score;
            gameOverScreen.style.display = 'block';
        }

        // Input Handling
        document.addEventListener('keydown', changeDirection);

        function changeDirection(event) {
            const LEFT_KEY = 37;
            const RIGHT_KEY = 39;
            const UP_KEY = 38;
            const DOWN_KEY = 40;

            const keyPressed = event.keyCode;
            const goingUp = dy === -1;
            const goingDown = dy === 1;
            const goingRight = dx === 1;
            const goingLeft = dx === -1;

            if (keyPressed === LEFT_KEY && !goingRight) {
                dx = -1; dy = 0;
            }
            if (keyPressed === UP_KEY && !goingDown) {
                dx = 0; dy = -1;
            }
            if (keyPressed === RIGHT_KEY && !goingLeft) {
                dx = 1; dy = 0;
            }
            if (keyPressed === DOWN_KEY && !goingUp) {
                dx = 0; dy = 1;
            }
        }

        // Mobile Controls
        function handleMobileInput(direction) {
            const goingUp = dy === -1;
            const goingDown = dy === 1;
            const goingRight = dx === 1;
            const goingLeft = dx === -1;

            if (direction === 'LEFT' && !goingRight) { dx = -1; dy = 0; }
            if (direction === 'UP' && !goingDown) { dx = 0; dy = -1; }
            if (direction === 'RIGHT' && !goingLeft) { dx = 1; dy = 0; }
            if (direction === 'DOWN' && !goingUp) { dx = 0; dy = 1; }
        }

        // Start game on load
        initGame();

    </script>
</body>
</html>
